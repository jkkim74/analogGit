<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.skplanet.pandora.repository.oracle.OracleRepository">

	<sql id="pagingHead">
		SELECT *
		FROM (
			SELECT IN_SQ.*, ROWNUM AS RNUM
			FROM (
	</sql>

	<sql id="pagingFoot">
			) IN_SQ
			WHERE ROWNUM &lt;= #{offset} + #{limit}
		)
		WHERE RNUM &gt; #{offset}
	</sql>
	<sql id="pagingFoot" databaseId="hsql">
		LIMIT #{offset}, #{limit}
	</sql>

	<select id="selectMembers" parameterType="map" resultType="AutoMappedMap">
		<include refid="pagingHead" />

		<if test="uploadProgress.pageId == 'pan0101'">
			<include refid="selectMembers_pan0101" />
		</if>
		<if test="uploadProgress.pageId == 'pan0103'">
			<include refid="selectMembers_pan0103" />
		</if>
		<if test="uploadProgress.pageId == 'pan0105'">
			<include refid="selectMembers_pan0105" />
		</if>
		<if test="uploadProgress.pageId == 'pan0106'">
			<include refid="selectMembers_pan0106" />
		</if>

		<include refid="pagingFoot" />
	</select>
	<select id="selectMembers" parameterType="map" resultType="AutoMappedMap" databaseId="hsql">
		<if test="uploadProgress.pageId == 'pan0101'">
			<include refid="selectMembers_pan0101" />
		</if>
		<if test="uploadProgress.pageId == 'pan0103'">
			<include refid="selectMembers_pan0103" />
		</if>
		<if test="uploadProgress.pageId == 'pan0105'">
			<include refid="selectMembers_pan0105" />
		</if>
		<if test="uploadProgress.pageId == 'pan0106'">
			<include refid="selectMembers_pan0106" />
		</if>

		<include refid="pagingFoot" />
	</select>

	<select id="countMembers" parameterType="map" resultType="int">
		SELECT COUNT(*) FROM (
		<if test="uploadProgress.pageId == 'pan0101'">
			<include refid="selectMembers_pan0101" />
		</if>
		<if test="uploadProgress.pageId == 'pan0103'">
			<include refid="selectMembers_pan0103" />
		</if>
		<if test="uploadProgress.pageId == 'pan0105'">
			<include refid="selectMembers_pan0105" />
		</if>
		<if test="uploadProgress.pageId == 'pan0106'">
			<include refid="selectMembers_pan0106" />
		</if>
		)
	</select>

</mapper>
