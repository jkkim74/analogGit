<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ObsCommonMapper">

    <!-- 시작날짜 주의 첫째날(1)과 종료날짜 주의 마지막날(7)의 between 절을 만든다. -->
    <sql id="betweenStartDateAndEndDatePerWeek">
        BETWEEN (
            SELECT C2.std_dt
            FROM COMUSER.COM_STD_DT C1
            JOIN COMUSER.COM_STD_DT C2
                ON C1.std_ym = C2.std_ym
                AND C1.wk_cd = C2.wk_cd
                AND C2.day_ind_cd = 1
            WHERE C1.std_dt = #{startDate})
        AND (
            SELECT C2.std_dt
            FROM COMUSER.COM_STD_DT C1
            JOIN COMUSER.COM_STD_DT C2
                ON C1.std_ym = C2.std_ym
                AND C1.wk_cd = C2.wk_cd
                AND C2.day_ind_cd = 7
            WHERE C1.std_dt = #{endDate})
    </sql>

</mapper>
